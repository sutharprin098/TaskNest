<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TaskNest - Seasonal / Event Concierge</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #1E7E7A;
  --primary-dark: #125C5A;
  --bg: #F3F7F8;
  --white: #FFFFFF;
  --text: #0F172A;
  --muted: #5B6B7A;
  --border: #E2E8F0;
}
body {
  margin: 0;
  font-family: 'Manrope', sans-serif;
  background: radial-gradient(1200px 500px at 10% -10%, #E6F6FF 0%, #F3F7F8 45%, #F7FBFC 100%);
  color: var(--text);
}
header {
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(6px);
  padding: 16px;
  text-align: center;
  font-size: 20px;
  font-weight: 700;
  color: var(--primary-dark);
  box-shadow: 0 10px 20px rgba(15, 23, 42, 0.06);
}
.container {
  max-width: 900px;
  margin: 26px auto;
  padding: 0 16px;
}
.panel {
  background: var(--white);
  border-radius: 22px;
  padding: 22px;
  box-shadow: 0 16px 32px rgba(15, 23, 42, 0.08);
  border: 1px solid rgba(226, 232, 240, 0.8);
}
.hero {
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 18px;
  align-items: center;
}
.hero h2 {
  margin: 0 0 10px 0;
  font-family: 'Fraunces', serif;
  font-size: 28px;
  color: var(--primary-dark);
}
.hero p { color: var(--muted); font-size: 15px; line-height: 1.6; }
.hero-img {
  width: 100%;
  height: 240px;
  object-fit: cover;
  border-radius: 18px;
  box-shadow: 0 12px 24px rgba(15, 23, 42, 0.12);
}
.pill {
  display: inline-flex;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  background: #E9FBF9;
  color: var(--primary-dark);
  border: 1px solid var(--border);
}
.list { padding-left: 18px; color: var(--muted); font-size: 14px; line-height: 1.7; }
.actions { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 16px; }
.btn {
  display: inline-block;
  background: var(--primary);
  color: white;
  text-decoration: none;
  padding: 12px 16px;
  border-radius: 14px;
  font-weight: 700;
  font-size: 14px;
}
.btn.ghost {
  background: white;
  color: var(--primary-dark);
  border: 1px solid var(--border);
}

input, select, textarea {
  width: 100%;
  padding: 14px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: #F9FBFC;
  font-family: inherit;
  font-size: 14px;
  box-sizing: border-box;
  margin-top: 8px;
}
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary); background: #fff; }

label { font-size: 13px; font-weight: 600; color: #415161; display: block; margin-top: 15px; }

button {
  width: 100%;
  padding: 14px 16px;
  margin-top: 18px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 14px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
}

.form-panel { margin-top: 22px; }
.form-row { display: flex; gap: 10px; }

iframe { width: 100%; height: 160px; border: 0; border-radius: 12px; background: #eee; margin-top: 8px; }
.loc-btn { background: #E6F6FF; color: var(--primary-dark); margin-top: 6px; padding: 10px; font-size: 14px; }

@media (max-width: 860px) {
  .hero { grid-template-columns: 1fr; }
  .hero-img { height: 200px; }
  .form-row { flex-direction: column; }
}
</style>
</head>
<body>
<header>TaskNest</header>
<div class="container">
  <div class="panel">
    <div class="hero">
      <div>
        <span class="pill">Concierge</span>
        <h2>Seasonal / Event Concierge</h2>
        <p>Seasonal setup, planning, and concierge support for events and special dates.</p>
        <ul class="list">
          <li>Decor and setup coordination</li>
          <li>Event prep and reset</li>
          <li>Personalized assistance</li>
        </ul>
        <div class="actions">
          <a class="btn" href="index.html?service=seasonal-concierge&book=1">Book this service</a>
          <a class="btn ghost" href="index.html">Back to Home</a>
        </div>
      </div>
      <img class="hero-img" src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?auto=format&fit=crop&w=1200&q=80" alt="Event concierge">
    </div>
  </div>

  <div class="panel form-panel">
    <h2>Book This Service</h2>
    <p>Share your details and we will confirm on WhatsApp.</p>

    <label>Mobile Number</label>
    <input type="tel" id="phone" placeholder="Enter 10-digit number" maxlength="10">

    <label>Ingredients Provided By</label>
    <select id="ingredientSource">
      <option value="Client brings ingredients">I will provide the materials</option>
      <option value="TaskNest provides ingredients">TaskNest will arrange everything</option>
    </select>

    <label>Location</label>
    <div style="background:#F9FBFC; padding:10px; border-radius:12px; border:1px solid #E2E8F0; margin-top:8px;">
      <iframe id="mapFrame" src="https://maps.google.com/maps?q=Delhi&t=&z=13&ie=UTF8&iwloc=&output=embed"></iframe>
      <button class="loc-btn" onclick="detectLocation()">Detect My Location</button>
      <textarea id="address" placeholder="House No, Floor, Landmark..." rows="2" style="background:white;"></textarea>
      <div id="locStatus" style="font-size:11px; color:green; margin-top:5px;"></div>
    </div>

    <label>Full Name</label>
    <input type="text" id="name" placeholder="Your Name">

    <label>Date & Time</label>
    <div class="form-row">
      <input type="date" id="date">
      <select id="timeSlot"></select>
    </div>

    <button onclick="confirmAndWhatsApp()">Send on WhatsApp</button>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDgYTocBZ_JNTtqT_M1w8cX-WkiY9sSW3w",
    authDomain: "tasknest-test.firebaseapp.com",
    projectId: "tasknest-test",
    storageBucket: "tasknest-test.firebasestorage.app",
    messagingSenderId: "162770306478",
    appId: "1:162770306478:web:8a4150a374eaf7ec03b43f"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app, "tasknest");

  const serviceName = "Seasonal / Event Concierge";
  const amount = "Custom Quote";
  window.userLat = "Not Shared";
  window.userLng = "Not Shared";

  window.confirmAndWhatsApp = () => {
    const phone = document.getElementById('phone').value;
    const name = document.getElementById('name').value;
    const date = document.getElementById('date').value;
    const time = document.getElementById('timeSlot').value;
    const address = document.getElementById('address').value;
    const ingredientSource = document.getElementById('ingredientSource').value;

    if (!phone || phone.length !== 10) { alert("Please enter a valid 10-digit number"); return; }
    if (!name || !date || !address) { alert("Please fill Name, Address and Date."); return; }

    const waMsg = `*New Booking Request*%0A*Service:* ${serviceName}%0A%0AUser: ${name}%0APhone: ${phone}%0ADate: ${date} (${time})%0AAddress: ${address}%0A%0A*Materials:* ${ingredientSource}%0A*Pricing:* ${amount}%0A*Location:* ${window.userLat}, ${window.userLng}`;
    window.open(`https://wa.me/919509706699?text=${waMsg}`, '_blank');

    const booking = {
      phone, name, address, date, timeSlot: time,
      latitude: window.userLat, longitude: window.userLng,
      service: serviceName,
      ingredientSource,
      amount,
      status: "Pending Confirmation",
      timestamp: new Date()
    };

    addDoc(collection(db, "bookings"), booking)
      .then(() => console.log("Booking saved successfully"))
      .catch((e) => console.error("Error saving booking:", e));
  };
</script>

<script>
  function detectLocation() {
    const status = document.getElementById('locStatus');
    const mapFrame = document.getElementById('mapFrame');

    if (!navigator.geolocation) { status.innerText = "Geo not supported"; return; }
    status.innerText = "Locating...";

    navigator.geolocation.getCurrentPosition(
      (pos) => {
        window.userLat = pos.coords.latitude;
        window.userLng = pos.coords.longitude;
        status.innerText = `Matched: ${window.userLat.toFixed(4)}, ${window.userLng.toFixed(4)}`;
        mapFrame.src = `https://maps.google.com/maps?q=${window.userLat},${window.userLng}&z=15&output=embed`;
      },
      () => { status.innerText = "Location access denied."; status.style.color = "red"; }
    );
  }

  function generateSlots() {
    const sel = document.getElementById('timeSlot');
    sel.innerHTML = "";
    for (let i = 10; i <= 20; i++) {
      let time = (i > 12 ? i - 12 : i) + (i >= 12 ? " PM" : " AM");
      let opt = document.createElement('option');
      opt.value = time; opt.innerText = time;
      sel.appendChild(opt);
    }
  }

  window.addEventListener('load', generateSlots);
</script>
</body>
</html>
